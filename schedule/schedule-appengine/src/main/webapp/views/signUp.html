<form role="form" novalidate name="signUpForm" ng-submit="createUser()">
    <div class="col-md-3 ">
        <div>
            <p>
                <span class="h4">sign up</span>
            </p>
        </div>
        <div>
            <div class="form-group has-feedback"
                 ng-class="{'has-success':usernameCheck.ok, 'has-error': usernameCheck.nok}">
                <label class="sr-only" for="username">Name (your public display name)</label>
                <input id="username" type="text" class="form-control input-sm"
                       placeholder="Name (your public display name)"
                       ng-model="user.name" ng-model-options="{debounce:500}" ng-change="checkUsername()"
                       required minlength="3" maxlength="128">
                <span class="help-block">{{usernameCheck.nokText}}</span>
                <span class="glyphicon form-control-feedback"
                      ng-class="{'glyphicon-ok':usernameCheck.ok, 'glyphicon-remove': usernameCheck.nok}"></span>
                <span class="form-control-feedback"
                      ng-hide="spinnerHidden || usernameCheck.ok || usernameCheck.nok"
                      us-spinner="{lines:9, length:5, width:2, radius:3, trail: 40}"></span>
            </div>
            <div class="form-group has-feedback"
                 ng-class="{'has-error': hasError('email'), 'has-success': hasSuccess('email')}">
                <label class="sr-only" for="email">Email</label>
                <input id="email" type="email" name="email" ng-model="user.email" class="form-control input-sm"
                       placeholder="Email"
                       required>
                <span class="glyphicon form-control-feedback"
                      ng-class="{'glyphicon-ok':hasSuccess('email'), 'glyphicon-remove': hasError('email')}"></span>

                <div ng-show="hasError('email')">
                    <span class="help-block" ng-show="signUpForm.email.$error.required">Tell us your email.</span>
                    <span class="help-block" ng-show="signUpForm.email.$error.email">This is not a valid email.</span>
                </div>
            </div>
            <div class="form-group has-feedback"
                 ng-class="{'has-error': hasError('password'), 'has-success': hasSuccess('password')}">
                <label class="sr-only" for="password">Password</label>
                <input id="password" type="password" name="password" ng-model="user.password"
                       class="form-control input-sm" placeholder="Password" required strong-password>
                <span class="glyphicon form-control-feedback"
                      ng-class="{'glyphicon-ok':hasSuccess('password'), 'glyphicon-remove': hasError('password')}"></span>

                <div ng-show="hasError('password')">
                    <span class="help-block"
                          ng-show="signUpForm.password.$error.required">Please choose a password.</span>
                    <span class="help-block"
                          ng-show="signUpForm.password.$error.strongPassword">Password must be at least 4 characters long.</span>
                </div>
            </div>
            <div class="form-group has-feedback"
                 ng-class="{'has-error': hasError('confirm'), 'has-success': hasSuccess('confirm')}">
                <label class="sr-only" for="confirm">Confirm password</label>
                <input id="confirm" type="password" name="confirm" ng-model="user.confirmPassword"
                       class="form-control input-sm" placeholder="Confirm password" required
                       confirm-field="signUpForm.password">
                <span class="glyphicon form-control-feedback"
                      ng-class="{'glyphicon-ok':hasSuccess('confirm'), 'glyphicon-remove': hasError('confirm')}"></span>

                <div ng-show="hasError('confirm')">
                    <span class="help-block"
                          ng-show="signUpForm.confirm.$error.required">Please confirm your password.</span>
                    <span class="help-block"
                          ng-show="signUpForm.confirm.$error.confirmField">The confirmation and the password must match.</span>
                </div>
            </div>
        </div>
        <div>
            <button type="submit" ng-disabled="signUpForm.$invalid || !usernameCheck.ok"
                    class="btn btn-sm btn-default btn-primary">
                sign up
            </button>
        </div>
    </div>
</form>